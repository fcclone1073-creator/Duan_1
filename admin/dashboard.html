<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Nhóm 5 Shop</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span>Admin Panel</span>
            </div>
        </div>

        <nav class="sidebar-nav">
            <a href="#dashboard" class="nav-item active" data-page="dashboard">
                <i class="fas fa-chart-line"></i>
                <span>Dashboard</span>
            </a>
            <a href="#products" class="nav-item" data-page="products">
                <i class="fas fa-box"></i>
                <span>Sản phẩm</span>
            </a>
            <a href="#orders" class="nav-item" data-page="orders">
                <i class="fas fa-shopping-cart"></i>
                <span>Đơn hàng</span>
            </a>
            <a href="#users" class="nav-item" data-page="users">
                <i class="fas fa-users"></i>
                <span>Người dùng</span>
            </a>
            <a href="#categories" class="nav-item" data-page="categories">
                <i class="fas fa-tags"></i>
                <span>Danh mục</span>
            </a>
            <a href="#statistics" class="nav-item" data-page="statistics">
                <i class="fas fa-chart-bar"></i>
                <span>Thống kê</span>
            </a>
        </nav>

        <div class="sidebar-footer">
            <button class="btn-logout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Đăng xuất</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="top-header">
            <div class="header-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <h2 id="pageTitle">Dashboard</h2>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="userName">Admin</span>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <div class="content-wrapper">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="stats-grid">
                    <div class="stat-card stat-primary">
                        <div class="stat-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalProducts">0</h3>
                            <p>Tổng sản phẩm</p>
                        </div>
                    </div>
                    <div class="stat-card stat-success">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalOrders">0</h3>
                            <p>Tổng đơn hàng</p>
                        </div>
                    </div>
                    <div class="stat-card stat-warning">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalUsers">0</h3>
                            <p>Tổng người dùng</p>
                        </div>
                    </div>
                    <div class="stat-card stat-info">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalRevenue">0₫</h3>
                            <p>Tổng doanh thu</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Đơn hàng gần đây</h3>
                            <a href="#orders" class="view-all">Xem tất cả</a>
                        </div>
                        <div class="card-body">
                            <div id="recentOrders" class="table-container">
                                <p class="text-muted">Đang tải...</p>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Sản phẩm bán chạy</h3>
                            <a href="#products" class="view-all">Xem tất cả</a>
                        </div>
                        <div class="card-body">
                            <div id="topProducts" class="table-container">
                                <p class="text-muted">Đang tải...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Page -->
            <div id="products" class="page">
                <div class="page-header">
                    <h2>Quản lý sản phẩm</h2>
                    <button class="btn-primary" onclick="openAddProductModal()">
                        <i class="fas fa-plus"></i>
                        Thêm sản phẩm
                    </button>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="productSearch" placeholder="Tìm kiếm sản phẩm..." onkeyup="searchProducts()">
                        </div>
                        <select id="categoryFilter" onchange="filterProducts()">
                            <option value="">Tất cả danh mục</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Ảnh</th>
                                        <th>Tên sản phẩm</th>
                                        <th>Danh mục</th>
                                        <th>Giá</th>
                                        <th>Tồn kho</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTableBody">
                                    <tr>
                                        <td colspan="6" class="text-center">Đang tải...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Page -->
            <div id="orders" class="page">
                <div class="page-header">
                    <h2>Quản lý đơn hàng</h2>
                    <div class="filter-group">
                        <select id="orderStatusFilter" onchange="filterOrders()">
                            <option value="">Tất cả trạng thái</option>
                            <option value="pending">Chờ xác nhận</option>
                            <option value="confirmed">Đã xác nhận</option>
                            <option value="shipping">Đang giao</option>
                            <option value="delivered">Đã giao</option>
                            <option value="cancelled">Đã hủy</option>
                        </select>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Mã đơn</th>
                                        <th>Khách hàng</th>
                                        <th>Sản phẩm</th>
                                        <th>Tổng tiền</th>
                                        <th>Trạng thái</th>
                                        <th>Ngày đặt</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody">
                                    <tr>
                                        <td colspan="7" class="text-center">Đang tải...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Page -->
            <div id="users" class="page">
                <div class="page-header">
                    <h2>Quản lý người dùng</h2>
                    <button class="btn-primary" onclick="openAddUserModal()">
                        <i class="fas fa-plus"></i>
                        Thêm người dùng
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Tên</th>
                                        <th>Email</th>
                                        <th>Vai trò</th>
                                        <th>Ngày tạo</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody">
                                    <tr>
                                        <td colspan="5" class="text-center">Đang tải...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Categories Page -->
            <div id="categories" class="page">
                <div class="page-header">
                    <h2>Quản lý danh mục</h2>
                    <button class="btn-primary" onclick="openAddCategoryModal()">
                        <i class="fas fa-plus"></i>
                        Thêm danh mục
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Tên danh mục</th>
                                        <th>Mô tả</th>
                                        <th>Ngày tạo</th>
                                        <th>Thao tác</th>
                                    </tr>
                                </thead>
                                <tbody id="categoriesTableBody">
                                    <tr>
                                        <td colspan="4" class="text-center">Đang tải...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Page -->
            <div id="statistics" class="page">
                <div class="page-header">
                    <h2>Thống kê</h2>
                </div>

                <div class="stats-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Doanh thu theo tháng</h3>
                        </div>
                        <div class="card-body">
                            <div id="revenueChart" class="chart-placeholder">
                                <p class="text-muted">Biểu đồ doanh thu</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="productModalTitle">Thêm sản phẩm mới</h3>
                <button class="modal-close" onclick="closeModal('productModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="productForm" class="modal-body">
                <input type="hidden" id="productId">
                
                <div class="form-group">
                    <label for="productName">Tên sản phẩm *</label>
                    <input type="text" id="productName" required>
                </div>

                <div class="form-group">
                    <label for="productDescription">Mô tả</label>
                    <textarea id="productDescription" rows="4"></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Giá (VNĐ) *</label>
                        <input type="number" id="productPrice" min="0" step="1000" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Tồn kho *</label>
                        <input type="number" id="productStock" min="0" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="productCategory">Danh mục *</label>
                    <select id="productCategory" required>
                        <option value="">Chọn danh mục</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="productImage">URL ảnh sản phẩm</label>
                    <input type="url" id="productImage" placeholder="https://...">
                    <small>Hoặc upload ảnh từ máy tính</small>
                </div>

                <div class="form-group">
                    <label for="productImageFile">Upload ảnh sản phẩm</label>
                    <input type="file" id="productImageFile" accept="image/*" onchange="handleImageUpload(event)">
                    <div id="imagePreview" style="margin-top: 10px; display: none;">
                        <img id="previewImg" src="" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 8px;">
                        <button type="button" class="btn-secondary" onclick="clearImagePreview()" style="margin-left: 10px;">Xóa ảnh</button>
                    </div>
                    <small>Chỉ chấp nhận file ảnh (JPG, PNG, GIF, WebP)</small>
                </div>

                <div class="form-group">
                    <label for="productRating">Đánh giá (0-5)</label>
                    <input type="number" id="productRating" min="0" max="5" step="0.1" value="4.5">
                </div>

                <div class="form-group">
                    <label for="productSold">Đã bán</label>
                    <input type="number" id="productSold" min="0" value="0">
                </div>

                <div class="form-group">
                    <label for="productDiscount">Giảm giá (%)</label>
                    <input type="number" id="productDiscount" min="0" max="100" value="0">
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('productModal')">
                        Hủy
                    </button>
                    <button type="submit" class="btn-primary">
                        <span id="productSubmitText">Thêm sản phẩm</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Thêm danh mục mới</h3>
                <button class="modal-close" onclick="closeModal('categoryModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="categoryForm" class="modal-body">
                <div class="form-group">
                    <label for="categoryName">Tên danh mục *</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label for="categoryDescription">Mô tả</label>
                    <textarea id="categoryDescription" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('categoryModal')">
                        Hủy
                    </button>
                    <button type="submit" class="btn-primary">Thêm danh mục</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="userModalTitle">Thêm người dùng mới</h3>
                <button class="modal-close" onclick="closeModal('userModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="userForm" class="modal-body">
                <input type="hidden" id="userId">
                
                <div class="form-group">
                    <label for="userName">Tên người dùng *</label>
                    <input type="text" id="userName" required>
                </div>

                <div class="form-group">
                    <label for="userEmail">Email *</label>
                    <input type="email" id="userEmail" required>
                </div>

                <div class="form-group">
                    <label for="userPassword">Mật khẩu *</label>
                    <input type="password" id="userPassword" required>
                    <small id="passwordHint">Để trống nếu không muốn đổi mật khẩu (khi sửa)</small>
                </div>

                <div class="form-group">
                    <label for="userRole">Vai trò *</label>
                    <select id="userRole" required>
                        <option value="user">User</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeModal('userModal')">
                        Hủy
                    </button>
                    <button type="submit" class="btn-primary">
                        <span id="userSubmitText">Thêm người dùng</span>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Order Detail Modal -->
    <div id="orderDetailModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3>Chi tiết đơn hàng</h3>
                <button class="modal-close" onclick="closeModal('orderDetailModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="orderDetailContent">
                <p class="text-muted">Đang tải...</p>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>Xác nhận</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Bạn có chắc chắn muốn xóa?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeModal('confirmModal')">
                    Hủy
                </button>
                <button type="button" class="btn-danger" id="confirmBtn">
                    Xóa
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="api.js"></script>
    <script src="app.js"></script>
</body>
</html>

